<div class="container">
    <form class="form-horizontal" role="form"  action="/home" method="post">
        <h3>Search</h3>
        <div class="form-group">
            <label for="doc_name" class="col-md-2 control-label">Search by name: </label>
            <div class="col-md-4">
              <input type="text" class="form-control" id="doc_name" name="doc_name" placeholder="Document name(more than 3 characters)" value="{{docName}}" style="color: #000;">
          </div>
          <label for="doc_author" class="col-md-2 control-label">Search by author/executer: </label>
          <div class="col-md-4">
              <input type="text" class="form-control" id="doc_author" name="doc_author"  placeholder="Author name(more than 3 characters)" value="{{docAuthor}}" style="color: #000;">
          </div>

      </div>
      <div class="form-group">
        <div class="group1">
          <label for="doc_status" class="col-md-2 control-label">Status : </label>
          <div class="col-md-4">
            <select class="btn btn-primary dropdown-toggle" class="caret" name="doc_status" id="doc_status">
                {{#if st1}}
                <option value="all">All</option>
                <option value="create" selected="selected">Created</option>
                <option value="inprogress">Inprogress</option>
                <option value="done">Done</option>
                {{else}}
                {{#if st2}}
                <option value="all">All</option>
                <option value="create">Created</option>
                <option value="inprogress" selected="selected">Inprogress</option>
                <option value="done" >Done</option>
                {{else}}
                {{#if st3}}
                <option value="all" >All</option>
                <option value="create" >Created</option>
                <option value="inprogress">Inprogress</option>
                <option value="done" selected="selected">Done</option>
                {{else}}
                <option value="all" selected="selected">All</option>
                <option value="create" >Created</option>
                <option value="inprogress">Inprogress</option>
                <option value="done" >Done</option>
                {{/if}}
                {{/if}}
                {{/if}}

            </select>

        </div>
    </div>
    <div class="group2">
     <label for="doc_type" class="col-md-2 control-label">Type: </label>
     <div class="col-md-4">
      <select class="btn btn-primary dropdown-toggle" class="caret" name="doc_type" id="doc_type">
        {{#if type1}}
        <option value="all">All</option>
        <option value="own" selected="selected">Own</option>
        <option value="other_type">Other_type</option>
        {{else}}
        {{#if type2}}
        <option value="all">All</option>
        <option value="own" >Own</option>
        <option value="other_type" selected="selected">Other_type</option>
        {{else}}
        <option value="all" selected="selected">All</option>
        <option value="own">Own</option>
        <option value="other_type">Other_type</option>    
        {{/if}}
        {{/if}}


    </select>


</div>
</div>
</div>


<div class="form-group">
    <label for="fromDate" class="col-md-2 control-label">Date : </label>
    <div class="col-md-4">
        <input type="date" class="form-control2" id="fromDate" name="fromDate" value="{{docFromDate}}" style="color: #000;">
    </div>

    <label class="col-md-2" for="toDate"> To</label>
    <div class="col-md-4 ">
        <input for="inputDate" type="date" class="form-control2" id="toDate" name="toDate" value="{{docToDate}}" style="color: #000;">

    </div>

</div>
<div class="pull-right">

    <button id="search_submit" class="btn btn-mini" type="submit" onclick="search_doc()"><i class="glyphicon glyphicon-search" ></i> Search</button>

</div>


</form>
<br></br>
<!-- <p><a href="/workflow">NEW</a> create new doccument</p> -->
<p><a href="/home/upload">NEW</a> Upload file</p>


<!-- Page Heading/Breadcrumbs -->
    <div class="row">
        <div class="col-lg-12">
            <h1 class="page-header">Process

            </h1>

        </div>
    </div>

    <div class="tabs">
        <ul class="tab-links">
            <li class="active"><a href="#tab1" >My documents</a></li>
            <li><a href="#tab2">My workflows</a></li>
            <li><a href="#tab3">Pending tasks</a></li>

        </ul>

        <div class="tab-content">

            <!--                 document tab-->
            <div id="tab1" class="tab active">
                
                    <table id="table_doc" class="table muffin table-striped table-hover">
                        <thead>
                            <tr>
                                <th width="40"><a href="javascript:table_sort('tab_2',0)"></a></th>
                                <th width="40"><a href="javascript:table_sort('tab_2',1)">ID</a></th>
                                <th><a href="javascript:table_sort('tab_2',2)">Document name</a></th>
                                <th><a href="javascript:table_sort('tab_2',3)">Author</a></th>
                                <th><a href="javascript:table_sort('tab_2',4)">Created date</a></th>
                                <th><a href="javascript:table_sort('tab_2',5)">Status</a></th>
                                <th><a href="javascript:table_sort('tab_2',6)">Visability</a></th>

                            </tr>

                            {{#each doc}}
                            <tr class="each-doc">
                                <td><input type="checkbox" class="tab_2_check" data-row="0"></td>
                                <td><a class="btn btn-default btn-block" href="/documentDetail/{{this._id}}" >{{this.docId}}</a></td>
                                <td class="filepath"><a href="{{this.filepath}}">{{this.name}}</a></td>
                                <td>{{this.author}}</td>
                                <td class="dateCreate">{{this.dateCreate}}</td>
                                <td>{{this.status}}</td>
                                <td>
                                    {{#if this.status}}
                                    <button class="btn btn-default btn-block" type="button" data-toggle="collapse" data-target="#visibilityRow{{@index}}" aria-expanded="false" aria-controls="visibilityRow{{@index}}">Expand</button>
                                    <div class="collapse" id="visibilityRow{{@index}}">
                                        <div class="card">
                                          <ul class="list-group list-group-flush">
                                            <li class="list-group-item">Cras justo odio</li>
                                            <li class="list-group-item">Dapibus ac facilisis in</li>
                                            <li class="list-group-item">Vestibulum at eros</li>
                                          </ul>
                                        </div>
                                    </div>
                                    {{else}}
                                    <font color="green"><b>Only me</b></font>
                                    {{/if}}
                                    <a href="/document/{{this.docId}}/visibility" class="btn btn-default btn-block">Edit</a>
                                </td>
                            </tr>
                            {{/each}}  
                        </thead>



                        <table id="choice-btn">

                            <td>
                                <div class="pull-right"> 

                                    <div class="btn-group">
                                        <button id="tab_2_selectall" name="tab_2_selectall" class="btn btn-mini" type="button" ><i class="glyphicon glyphicon-ok" onClick="checkAll(this)"></i> Select All</button>
                                    </div>

                                    <div class="btn-group">
                                        <button id="tab_2_unselect" name="tab_2_unselect" class="btn btn-mini" type="button"><i class="glyphicon glyphicon-remove" onClick="unSelectAll()"></i> Unselect</button>
                                    </div>
                                       <!--  <div class="btn-group">
                                            <button id="add_row" class="btn btn-mini" type="button"><i class="glyphicon glyphicon-remove" onClick="Add()"></i>Add</button>
                                        </div> -->

                                    </div>
                                </td>
                            </table>


                            
                        </table>






                 
                </div>


                
                <!-- Workflow tab -->
                <div id="tab2" class="tab">
                    <form class="form-horizontal" role="form">
                        <table id="table_wf" class="table muffin table-striped table-hover margin-bottom0">
                            <thead>
                                <tr>
                                    <th width="40"><a href="javascript:table_sort('tab_2',0)"></a></th>
                                    <th><a href="javascript:table_sort('tab_2',1)">ID</a></th>
                                    <th><a href="javascript:table_sort('tab_2',2)">Workflow name</a></th>
                                    <th><a href="javascript:table_sort('tab_2',4)">Created date</a></th>
                                    <th><a href="javascript:table_sort('tab_2',5)">Status</a></th>
                                    
                                </tr>


<!--                                 {{#each exec}}
                                    <tr class="each-exec">
                                        Tester<td><input type="checkbox" class="tab_2_check" data-row="0"></td>
                                      <td>{{this.templateId}}</td>
                                      <td><a href="#"></a>tester</td>
                                      <td>test</td>
                                      <td>test2</td>
                                      <td><font color="red"></td>
                                      <td><a class="btn btn-default" href="/execution/{{this._id}}" >More detail</a></td>
                                    </tr>
                                    {{/each}} -->

                                    {{#each exec}}
                                    <tr class="each-doc">
                                        <td><input type="checkbox" class="tab_2_check" data-row="0"></td>
                                        <td>{{this.templateId}}</td>
                                        <td>{{this.templateName}}</td>
                                        <td>{{this.createDate}}</td>
                                        <td>
                                            {{#if this.status}}
                                            Done
                                            {{else}}
                                            In progress
                                            {{/if}}
                                        </td>
                                        <td> 
                                            <a class="btn btn-default" href="/execution/{{this._id}}" >More detail</a>
                                        </td>
                                    </tr>
                                    {{/each}}  
                                </thead>

                            </thead>



                            <table id="choice-btn">

                                <td>
                                    <div class="pull-right"> 

                                        <div class="btn-group">
                                            <button id="tab_2_selectall" name="tab_2_selectall" class="btn btn-mini" type="button" ><i class="glyphicon glyphicon-ok" onClick="checkAll(this)"></i> Select All</button>
                                        </div>

                                        <div class="btn-group">
                                            <button id="tab_2_unselect" name="tab_2_unselect" class="btn btn-mini" type="button"><i class="glyphicon glyphicon-remove" onClick="unSelectAll()"></i> Unselect</button>
                                        </div>

                                    </div>
                                </td>
                            </table>


                            
                        </table>


                    </form>
                </div>


                <!-- Task tab -->
                <div id="tab3" class="tab">
                    <form class="form-horizontal" role="form">
                        <table id="table_todo" class="table muffin table-striped table-hover margin-bottom0">
                            <thead>
                                <tr>
                                    <th width="40"><a href="javascript:table_sort('tab_2',0)"></a></th>
                                    <th><a href="javascript:table_sort('tab_2',1)">ID</a></th>
                                    <th><a href="javascript:table_sort('tab_2',2)">Workflow name</a></th>
                                    <th><a href="javascript:table_sort('tab_2',3)">Task name</a></th>
                                    <th><a href="javascript:table_sort('tab_2',4)">Executer</a></th>
                                    <th><a href="javascript:table_sort('tab_2',5)">Created date</a></th>
                                    <!-- No status because this is task that assign to -->
                                    <!-- <th><a href="javascript:table_sort('tab_2',5)">Status</a></th> -->
                                    
                                </tr>


                                {{#each task}}
                                <tr class="each-task">
                                    <td><input type="checkbox" class="tab_2_check" data-row="0"></td>
                                    <td>{{this.workflowExecutionId}}</td>
                                    <td>{{this.templateName}}</td>
                                    <td>{{this.taskName}}</td>
                                    <td>{{this.executor}}</td>
                                    <td>
                                        <a class="btn btn-default" href="/execution/tasks/{{this._id}}" >More detail</a>
                                        <!-- <a href="/documentDetail/{{this._id}}">More detail</a> -->
                                        <!-- <button class="btn btn-info.btn-sm" href="/logout">More detail</button> -->
                                    </td>
                                </tr>
                                {{/each}}

                            </thead>



                            <table id="choice-btn">

                                <td>
                                    <div class="pull-right"> 

                                        <div class="btn-group">
                                            <button id="tab_2_selectall" name="tab_2_selectall" class="btn btn-mini" type="button" ><i class="glyphicon glyphicon-ok" onClick="checkAll(this)"></i> Select All</button>
                                        </div>

                                        <div class="btn-group">
                                            <button id="tab_2_unselect" name="tab_2_unselect" class="btn btn-mini" type="button"><i class="glyphicon glyphicon-remove" onClick="unSelectAll()"></i> Unselect</button>
                                        </div>
                                       <!--  <div class="btn-group">
                                            <button id="add_row" class="btn btn-mini" type="button"><i class="glyphicon glyphicon-remove" onClick="Add()"></i>Add</button>
                                        </div> -->

                                    </div>
                                </td>
                            </table>


                            
                        </table>


                    </form>
                </div>



            </div>
        </div>


        <script>
        $(document).ready(function(){
            $('[data-toggle="popover"]').popover();   
        });
        </script>


        <script>
        $(document).ready(function(){
            $("#myBtn").click(function(){
                $("#myModal").modal();
            });
        });
        </script>

        <script>
        $(document).ready(function() {
            convertToReadableDate();
        })

        function convertToReadableDate() {
            var dateCreate = document.getElementsByClassName('dateCreate');
            for(var n = 0; n < dateCreate.length; ++n) {
                dateCreate[n].innerHTML = convertDateDDMMYYYY(dateCreate[n].innerHTML);
            }
        }

        function convertDateDDMMYYYY(_date) {
            var date = new Date(_date);

            var day = date.getDate();
            var month = date.getMonth() + 1;
            var year = date.getFullYear();

            if(month < 10)
                month = '0' + month;
            if(day < 10)
                day = '0' + day;

            return day + '/' + month + '/' + year;
        }
        </script>